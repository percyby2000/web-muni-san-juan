
---
const API_KEY = "TU_API_KEY";
const CALENDAR_ID = "TU_CALENDAR_ID";
---

<div id="calendar"></div>

<script client:load>
  import { Calendar } from "@fullcalendar/core";
  import dayGridPlugin from "@fullcalendar/daygrid";

  document.addEventListener("DOMContentLoaded", async () => {

    const response = await fetch(
      `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?key=${API_KEY}`
    );

    const data = await response.json();

    // Mapear eventos Google a FullCalendar
    const events = data.items.map(e => ({
      title: e.summary,
      start: e.start.dateTime || e.start.date,
      end: e.end.dateTime || e.end.date
    }));

    const calendar = new Calendar(document.getElementById("calendar"), {
      plugins: [dayGridPlugin],
      initialView: "dayGridMonth",
      locale: "es",
      height: "auto",
      events
    });

    calendar.render();
  });
</script>

<style>
#calendar {
  max-width: 1100px;
  margin: auto;
}
</style>
